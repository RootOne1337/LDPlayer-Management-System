# üìä Monitoring Dashboard - Quick Guide

## üéØ –û–±–∑–æ—Ä

Real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö —Ä–∞–±–æ—á–∏—Ö —Å—Ç–∞–Ω—Ü–∏–π LDPlayer Management System.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ Live —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö workstations (online/offline)
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —ç–º—É–ª—è—Ç–æ—Ä–æ–≤
- ‚úÖ Latency (–≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞) –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
- ‚úÖ Auto-refresh –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- ‚úÖ Alert –ø—Ä–∏ 3+ consecutive failures
- ‚úÖ Event log —Å –∏—Å—Ç–æ—Ä–∏–µ–π —Å–æ–±—ã—Ç–∏–π
- ‚úÖ Dark theme –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ BAT —Ñ–∞–π–ª (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# Double-click:
RUN_DASHBOARD.bat
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É
```bash
# Activate venv
venv\Scripts\activate

# Run dashboard
python dashboard_monitoring.py
```

---

## üìã –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –í–µ—Ä—Ö–Ω—è—è –ü–∞–Ω–µ–ª—å (Header)
**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- **Total:** –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ workstations
- **üü¢ Online:** –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç–∞–Ω—Ü–∏–∏
- **üî¥ Offline:** –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å—Ç–∞–Ω—Ü–∏–∏
- **üì± Emulators:** –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–º—É–ª—è—Ç–æ—Ä–æ–≤

**–ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- **üîÑ Refresh Now** - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- **‚è∏Ô∏è Pause / ‚ñ∂Ô∏è Resume** - –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/–≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **üóëÔ∏è Clear Log** - –û—á–∏—Å—Ç–∏—Ç—å event log

### –¢–∞–±–ª–∏—Ü–∞ –°—Ç–∞—Ç—É—Å–æ–≤

| –ö–æ–ª–æ–Ω–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| **Workstation ID** | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID (ws_001, ws_002, ...) |
| **Name** | –ò–º—è —Å—Ç–∞–Ω—Ü–∏–∏ (WS-FARM-001, ...) |
| **IP Address** | IP –∞–¥—Ä–µ—Å (192.168.1.101, ...) |
| **Status** | ONLINE (–∑–µ–ª—ë–Ω—ã–π) / OFFLINE (–∫—Ä–∞—Å–Ω—ã–π) |
| **Emulators** | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö —ç–º—É–ª—è—Ç–æ—Ä–æ–≤ |
| **Latency (ms)** | –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö |
| **Last Check** | –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ (HH:MM:SS) |

**–¶–≤–µ—Ç–∞ —Å—Ç–∞—Ç—É—Å–æ–≤:**
- üü¢ **ONLINE** (–∑–µ–ª—ë–Ω—ã–π) - –°—Ç–∞–Ω—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞
- üî¥ **OFFLINE** (–∫—Ä–∞—Å–Ω—ã–π) - –°—Ç–∞–Ω—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- üü° **WARNING** (–∂—ë–ª—Ç—ã–π) - –ü—Ä–æ–±–ª–µ–º—ã (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–∫–∞)
- ‚ö™ **UNKNOWN** (—Å–µ—Ä—ã–π) - –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å

### Event Log
–õ–æ–≥ —Å–æ–±—ã—Ç–∏–π —Å timestamp:
- `[HH:MM:SS] üöÄ Monitoring started` - –°—Ç–∞—Ä—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `[HH:MM:SS] ‚ùå ws_002: Connection failed` - –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `[HH:MM:SS] ‚ö†Ô∏è ALERT #1: ws_003 - timeout` - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞

**–ú–∞–∫—Å–∏–º—É–º:** 100 —Å—Ç—Ä–æ–∫ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö)

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –§–∞–π–ª: `dashboard_monitoring.py`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
```python
REFRESH_INTERVAL = 5000        # –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–º—Å)
MAX_LOG_LINES = 100            # –ú–∞–∫—Å. —Å—Ç—Ä–æ–∫ –≤ –ª–æ–≥–µ
ALERT_THRESHOLD = 3            # Alert –ø–æ—Å–ª–µ N –æ—à–∏–±–æ–∫ –ø–æ–¥—Ä—è–¥
```

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞:**
```python
# –î–ª—è –±–æ–ª–µ–µ —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ (–∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã):
REFRESH_INTERVAL = 3000

# –î–ª—è –º–µ–Ω–µ–µ —á–∞—Å—Ç—ã—Ö (–∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥):
REFRESH_INTERVAL = 10000
```

---

## üîç –ö–∞–∫ –†–∞–±–æ—Ç–∞–µ—Ç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 1. Background Worker Thread
```python
class MonitoringWorker(QThread):
    - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç UI)
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—É—é workstation –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
    - –ò–∑–º–µ—Ä—è–µ—Ç latency
    - –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —ç–º—É–ª—è—Ç–æ—Ä–æ–≤ (ldconsole list2)
    - Emit —Å–∏–≥–Ω–∞–ª—ã –≤ main thread
```

### 2. Connection Test
–î–ª—è –∫–∞–∂–¥–æ–π workstation:
1. `manager.test_connection()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
2. –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞ (latency)
3. –ï—Å–ª–∏ online ‚Üí –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —ç–º—É–ª—è—Ç–æ—Ä–æ–≤
4. –ï—Å–ª–∏ offline ‚Üí –∑–∞–ø–∏—Å–∞—Ç—å –æ—à–∏–±–∫—É

### 3. Alert System
```python
failure_counts[ws_id] += 1  # Increment on failure
if failure_counts[ws_id] == ALERT_THRESHOLD:
    emit alert  # –ü–æ–∫–∞–∑–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é –æ—à–∏–±–∫—É
```

**–°–±—Ä–æ—Å —Å—á—ë—Ç—á–∏–∫–∞:** –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å dashboard —É—Ç—Ä–æ–º: RUN_DASHBOARD.bat
2. –û—Å—Ç–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ñ–æ–Ω–µ
3. –ü—Ä–æ–≤–µ—Ä—è—Ç—å alerts –≤ event log
4. –ü—Ä–∏ offline - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫—É—é —Å—Ç–∞–Ω—Ü–∏—é
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ü—Ä–æ–±–ª–µ–º
```
1. –ù–∞–π—Ç–∏ offline —Å—Ç–∞–Ω—Ü–∏—é –≤ —Ç–∞–±–ª–∏—Ü–µ
2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å error –≤ event log
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
   - –°–µ—Ç—å: ping IP_ADDRESS
   - LDPlayer: –∑–∞–ø—É—â–µ–Ω –ª–∏ –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏
   - WinRM: Enable-PSRemoting –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏
```

### –ù–∞–≥—Ä—É–∑–∫–∞ –°–∏—Å—Ç–µ–º—ã
```
1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–ª–æ–Ω–∫—É "Emulators"
2. –ï—Å–ª–∏ —Å—Ç–∞–Ω—Ü–∏—è –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–∞ (>10 —ç–º—É–ª—è—Ç–æ—Ä–æ–≤):
   - –ü–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É
   - –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Å—Ç–∞–Ω—Ü–∏—é
```

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Dashboard –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install PyQt6

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å config.json
python -c "from Server.src.core.config import get_config; print(len(get_config().workstations))"
```

### –ü—Ä–æ–±–ª–µ–º–∞: –í—Å–µ —Å—Ç–∞–Ω—Ü–∏–∏ OFFLINE
**–ü—Ä–∏—á–∏–Ω—ã:**
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ IP –∞–¥—Ä–µ—Å–∞** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Server/config.json
2. **WinRM –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - –∑–∞–ø—É—Å—Ç–∏—Ç—å Enable-PSRemoting –Ω–∞ —Å—Ç–∞–Ω—Ü–∏—è—Ö
3. **Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç** - –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç 5985 (WinRM)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```powershell
# –¢–µ—Å—Ç WinRM –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
Test-WSMan -ComputerName 192.168.1.101
```

### –ü—Ä–æ–±–ª–µ–º–∞: Latency –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π (>1000ms)
**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ü–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω–∞—è —Å–µ—Ç—å
2. –°–ª–∞–±–∞—è —Å—Ç–∞–Ω—Ü–∏—è (–ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω CPU)
3. –ü—Ä–æ–±–ª–µ–º—ã —Å DNS

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ç–µ–≤—É—é –Ω–∞–≥—Ä—É–∑–∫—É
- –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–º—É–ª—è—Ç–æ—Ä–æ–≤
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞–Ω—Ü–∏—é

### –ü—Ä–æ–±–ª–µ–º–∞: Emulators count = 0, –Ω–æ —Å—Ç–∞–Ω—Ü–∏—è ONLINE
**–ü—Ä–∏—á–∏–Ω—ã:**
1. LDPlayer –Ω–µ –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏
2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ dnconsole.exe –≤ config.json
3. –ù–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ LDPlayer

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç—å –≤ config.json
"ldconsole_path": "C:\\LDPlayer\\LDPlayer9\\dnconsole.exe"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å LDPlayer –≤—Ä—É—á–Ω—É—é –Ω–∞ —Å—Ç–∞–Ω—Ü–∏–∏
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ Performance

**–ù–æ—Ä–º–∞–ª—å–Ω—ã–µ –ó–Ω–∞—á–µ–Ω–∏—è:**
- **Latency:** 50-200 ms (–ª–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å)
- **Refresh time:** < 5 —Å–µ–∫—É–Ω–¥ –¥–ª—è 8 —Å—Ç–∞–Ω—Ü–∏–π
- **Memory usage:** ~100 MB

**Alert Conditions:**
- Latency > 1000 ms ‚Üí –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é
- 3+ consecutive failures ‚Üí –°—Ç–∞–Ω—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- Emulators = 0 (long time) ‚Üí LDPlayer –Ω–µ –∑–∞–ø—É—â–µ–Ω

---

## üîê Security Notes

**–í–Ω–∏–º–∞–Ω–∏–µ:**
- Dashboard –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ credentials, —á—Ç–æ –∏ server (config.json)
- WinRM –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —à–∏—Ñ—Ä—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –î–ª—è production: –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å HTTPS WinRM

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ó–∞–ø—É—Å–∫–∞—Ç—å dashboard –≤ –∑–∞—â–∏—â—ë–Ω–Ω–æ–π —Å–µ—Ç–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å firewall rules
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–∞—Ä–æ–ª–∏

---

## üìö API Reference

### MonitoringWorker Class

**–°–∏–≥–Ω–∞–ª—ã:**
```python
status_updated = pyqtSignal(dict)
# Emit: {ws_id: {status, emulators, latency, error, last_check}}

error_occurred = pyqtSignal(str, str)
# Emit: (ws_id, error_message)
```

**–ú–µ—Ç–æ–¥—ã:**
```python
run()           # Main monitoring loop
stop()          # Stop monitoring gracefully
```

### MonitoringDashboard Class

**–ü—É–±–ª–∏—á–Ω—ã–µ –ú–µ—Ç–æ–¥—ã:**
```python
start_monitoring()    # Start background worker
stop_monitoring()     # Stop background worker
manual_refresh()      # Force immediate refresh
add_log(message)      # Add entry to event log
update_status(dict)   # Update table with results
```

---

## üé® Customization

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¶–≤–µ—Ç–æ–≤ –°—Ç–∞—Ç—É—Å–æ–≤
```python
STATUS_COLORS = {
    "online": QColor(46, 204, 113),      # Green
    "offline": QColor(231, 76, 60),      # Red
    "warning": QColor(241, 196, 15),     # Yellow
    "unknown": QColor(149, 165, 166),    # Gray
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ù–æ–≤—ã—Ö –ö–æ–ª–æ–Ω–æ–∫
```python
# –í create_status_table():
table.setColumnCount(8)  # +1 column
table.setHorizontalHeaderLabels([
    ..., "CPU %", "Memory %"  # New columns
])
```

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ Alerts
```python
# –í update_status():
if emulators > 15:
    self.show_alert(ws_id, f"Overload: {emulators} emulators")
```

---

## üìû Support

**–ü—Ä–æ–±–ª–µ–º—ã?**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å logs: `Server/logs/app.log`
2. Event log –≤ dashboard
3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `PRODUCTION_GUIDE.md`

**–ö–æ–Ω—Ç–∞–∫—Ç—ã:**
- GitHub: [Repository Issues]
- Logs: `Server/logs/`

---

## üöÄ Roadmap

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –§—É–Ω–∫—Ü–∏–∏:
- [ ] **Charts** - –ì—Ä–∞—Ñ–∏–∫–∏ latency/emulators –∑–∞ –≤—Ä–µ–º—è
- [ ] **Export** - –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∞—Ç—É—Å–æ–≤ –≤ CSV/JSON
- [ ] **Notifications** - Desktop notifications –¥–ª—è alerts
- [ ] **Remote Control** - –°—Ç–∞—Ä—Ç/—Å—Ç–æ–ø —ç–º—É–ª—è—Ç–æ—Ä–æ–≤ –∏–∑ dashboard
- [ ] **History** - –ò—Å—Ç–æ—Ä–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞ –¥–µ–Ω—å/–Ω–µ–¥–µ–ª—é

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-10-17  
**–ê–≤—Ç–æ—Ä:** LDPlayer Management System Team
